#!/bin/bash
#
# increase pulseaudio volume beyond 153%

read _ sink < <(pacmd dump | grep ^set-default-sink)
read _ _ volume < <(pacmd dump | grep -m1 "^set-sink-volume $sink")
read _ _ mute < <(pacmd dump | grep -m1 "^set-sink-mute $sink")

step=3

case ${1} in
    up)
        cmd='set-sink-volume'
        arg=$(( volume + step * 0x10000 / 100 ))
        ;;
    down)
        cmd='set-sink-volume'
        arg=$(( volume - step * 0x10000 / 100 ))
        ;;
    [-+][0-9]*|[0-9]*)
        arg=$(( volume + $1 * 0x10000 / 100 ))
        ;;
    mute)
        cmd='set-sink-mute'
        arg='yes'
        ;;
    unmute)
        cmd='set-sink-mute'
        arg='no'
        ;;
    toggle-mute)
        cmd='set-sink-mute'
        arg='yes'
        [ $mute == yes ] && arg=no
        ;;
    *)
        echo "usage: $0 < up | down | [+]n | -n | mute | unmute | toggle-mute >"
        exit 1;;
esac


pacmd ${cmd} ${sink} ${arg}
