#!/bin/bash

mode=$1

_amixer() {
  amixer --quiet --card 0 "$@"
}

_pactl() {
  pactl "$@" 2>/dev/null
}

case $mode in
  speakers)
    _amixer sset Speaker mute
    _amixer sset "Bass Speaker" unmute
    _amixer sset Headphone mute
    _pactl unload-module module-combine-sink
    ;;
  jack)
    _amixer sset Speaker unmute
    _amixer sset "Bass Speaker" mute
    _amixer sset Headphone unmute
    _pactl unload-module module-combine-sink
    _pactl set-card-profile 0 HiFi
    _pactl set-default-source alsa_input.pci-0000_00_1f.3-platform-skl_hda_dsp_generic.HiFi__hw_sofhdadsp__source
    ;;
  headphones)
    audio jack
    _pactl load-module module-combine-sink
    _pactl set-default-sink combined
    ;;
  *)
    echo "usage: $(basename "$0") [ speakers | jack | headphones ]";
    exit 1;;
esac
