#!/usr/bin/env bash

ssm() {
  local action=$1
  shift

  case $action in
    ls)
      aws ssm get-parameters-by-path \
        --recursive \
        --path "$1" \
        --query 'Parameters[].Name | join(`"\n"`, @)' \
        --output text
    ;;
    get)
      aws ssm get-parameter \
        --name "$1" \
        --with-decryption \
        --query Parameter.Value \
        --output text
    ;;
  esac
}
